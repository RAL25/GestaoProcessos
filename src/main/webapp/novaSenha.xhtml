<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                template="./WEB-INF/templates/template1.xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:p="http://primefaces.org/ui">

    <h:head>
        <title>Recuperação de senha</title>
    </h:head>
    
    <ui:define name="content">
        <h:body>
            #{param['email']}
            <h1>Olá, #{recuperaPassController.user.nome}</h1>

         <h:form id="recuperaSenha">
                
                <h1>Nova senha</h1>

                <p:messages id="messages" showDetail="false">
                    <p:autoUpdate/>
                </p:messages>
                
                <p:panelGrid
                    columns="2">

                    <h:outputText value="Email: #{param['email']}" 
                                  rendered="false"/>
                    
                    <p:outputLabel
                        for="password1"
                        value="Senha" />
                    <p:password
                        id="password1"
                        value="#{recuperaPassController.novaSenha}" 
                        match="password2"
                        required="true"
                        requiredMessage="Senha é obrigatório"
                        feedback="true"
                        toggleMask="true" />

                    <p:outputLabel
                        for="password2"
                        value="Reescreva a senha" />
                    <p:password
                        id="password2"
                        value="#{recuperaPassController.novaSenha}"
                        required="true"
                        requiredMessage="Reescrever a senha é obrigatório"
                        toggleMask="true" />

                </p:panelGrid>

                    <p:commandButton
                        id="recuperarButton"
                        value="Cadastrar nova senha"
                        action="#{recuperaPassController.atualiza()}"
                        process="@form"/>
                
                <p:blockUI
                    block="recuperaSenha"
                    trigger="recuperarButton" />
            </h:form>
        
        <h:link
            value="Go to home"
            outcome="/index" />
    </h:body>
    </ui:define>

</ui:composition>
